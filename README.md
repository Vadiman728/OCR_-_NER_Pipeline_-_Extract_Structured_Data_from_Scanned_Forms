
## Описание

Этот проект представляет собой **конвейер (pipeline)** для извлечения **структурированных данных** из **сканированных форм, документов (PDF) и изображений**. Он объединяет технологии **OCR (Optical Character Recognition)** и **NER (Named Entity Recognition)** для автоматического распознавания и выделения ключевой информации, такой как **имена, даты, суммы** и другие сущности, заданные заранее, из неструктурированного текста, содержащегося в изображениях.

## Цели проекта

*   **Автоматизация обработки документов:** Сокращение времени и ресурсов, необходимых для ручного ввода данных из сканов.
*   **Извлечение структурированных данных:** Преобразование текста с изображений в формат, готовый для загрузки в базы данных или системы обработки.
*   **Демонстрация интеграции ML-компонентов:** Показывает, как можно объединить OCR, NLP и API для создания конечного решения.

## Бизнес-задачи

Этот пайплайн может быть полезен для решения следующих задач:

*   **Финансовые услуги:** Извлечение данных из анкет, кредитных заявок, чеков, квитанций, договоров.
*   **Медицина:** Обработка медицинских форм, историй болезни, рецептов.
*   **Юриспруденция:** Анализ юридических документов, извлечение имен, дат, сумм по искам.
*   **Логистика:** Извлечение информации из накладных, счетов-фактур, документов на доставку.
*   **Образование:** Обработка анкет, форм, сканированных экзаменов.
*   **Общие задачи:** Любые сценарии, где требуется автоматически извлекать определённые поля из документов, представленных в виде изображений или PDF-файлов.

## Стек технологий

*   **Python:** Язык программирования.
*   **PaddleOCR:** Библиотека для распознавания текста (OCR) с открытым исходным кодом.
*   **PyMuPDF (fitz):** Библиотека для работы с PDF-файлами.
*   **spaCy:** Библиотека для обработки естественного языка (NLP), используется для NER.
*   **Regular Expressions (regex):** Для извлечения специфических паттернов (например, дат, сумм).
*   **FastAPI:** Современный веб-фреймворк для создания API.
*   **uvicorn:** ASGI-сервер для запуска FastAPI.

## Возможности

*   **Поддержка форматов:** Обработка PDF-файлов, изображений (JPEG, PNG и др.).
*   **Извлечение сущностей:** Нахождение и классификация имен, организаций, дат, сумм.
*   **API-интерфейс:** Предоставляет REST API для интеграции с другими приложениями.
*   **Гибридный подход:** Использование предобученных моделей (spaCy) и правил (regex) для повышения точности.
*   **Открытый исходный код:** Используются только библиотеки с открытым исходным кодом.

## Установка и запуск (для локального использования)

**Внимание:** Для запуска в Google Colab все зависимости устанавливаются внутри ноутбука, как показано в `main.ipynb`.

Для локального запуска:

1.  Убедитесь, что у вас установлен Python 3.x.
2.  Клонируйте репозиторий:
    ```bash
    git clone <URL_вашего_репозитория>
    cd <название_папки_репозитория>
    ```
3.  Установите зависимости:
    ```bash
    pip install paddlepaddle paddleocr spacy pymupdf fastapi uvicorn
    ```
4.  Загрузите предобученную модель spaCy для русского языка:
    ```bash
    python -m spacy download ru_core_news_sm
    ```
5.  Запустите приложение FastAPI:
    ```bash
    uvicorn main:app --reload
    ```
    Где `main.py` — файл, содержащий `app = FastAPI(...)`.

## Использование API

После запуска сервера API будет доступен (обычно) по адресу `http://127.0.0.1:8000`.

*   **Документация API:** Автоматически генерируется по адресу `http://127.0.0.1:8000/docs`.
*   **Эндпоинт для извлечения:** `POST /extract_entities/`
    *   Тип запроса: `multipart/form-data`
    *   Поле: `file` (файл PDF или изображение)
    *   Ответ: `JSON` с извлечёнными сущностями (PERSON, ORG, DATE, MONEY и т.д.).

## Пример ответа API

```json
{
  "PERSON": ["Иванов Петр Николаевич", "И.П. Иванов"],
  "ORG": ["ООО \"Рога и Копыта\""],
  "DATE": ["15.03.2024", "25.07.1985", "16.03.2024"],
  "MONEY": ["1 250 000,00 руб.", "150 000,00 USD"],
  "EXTRACTED_TEXT": "..."
}
